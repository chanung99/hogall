<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	
	<select id="login" parameterType="com.ho.gall.model.vo.Member" resultType="com.ho.gall.model.vo.Member">
		select * from member where memberid = #{memberId}
	</select>
  
  	<insert id="signup" parameterType="member">
  		insert into member values(#{memberId},#{password},#{name},#{nickName},#{email},'Y',0,#{zipCode},#{address},#{detailAddress},sysdate,'Y',null)
  	</insert>
  	
  	<select id="idCheck" parameterType="string" resultType="member">
  		select * from member where memberid = #{id}
  	</select>
  	
  	<select id="nickNameCheck" parameterType="string" resultType="member">
  		select * from member where nickname = #{nickname}
  	</select>
  	
  	<select id="idFinder" parameterType="map" resultType="string">
  		select memberId from member where name=#{userName} and email=#{email}
  	</select>
  	
  	<select id="myPageBid" resultType="com.ho.gall.model.vo.Participating">
  		select p.*,to_char(enrolldate,'YYYY-MM-DD')as enrolld from participating p where memberId = #{id}
  	</select>
  	
  	<select id="myPageWin" resultType="com.ho.gall.model.vo.WinningBid">
  		select w.*,to_char(wbdate,'YYYY-MM-DD')as wbdatee from winningbid w where memberId = #{id}
  	</select>
  	
  	<select id="bidCount" resultType="_int">
  		select count(*) from participating where memberId = #{id}
  	</select>
  	
  	<select id ="winCount" resultType="_int">
  		select count(*) from winningbid where memberId = #{id}
  	</select>
  	
  	<select id="selectPw" resultType="com.ho.gall.model.vo.Member">
  		select * from member where memberId = #{id}
  	</select>
  	
  	<update id="inforChange" parameterType="com.ho.gall.model.vo.Member">
  		update member set name=#{name} , nickname = #{nickName} , email = #{email} , zipcode = #{zipCode} , address = #{address} , detailaddress = #{detailAddress}  where memberId = #{memberId}
  	</update>
  	
  	<select id="setting" resultType="com.ho.gall.model.vo.Member">
  	
  		select to_char(enrolldate,'YYYY-MM-DD')as edate ,m.* from member m order by enrolldate asc
  	</select>
  	
  	<update id="memberOff" parameterType="map">
  		update member set onoff = 'N' , offcontent = #{content} where memberId = #{id}
  	</update>
</mapper>











